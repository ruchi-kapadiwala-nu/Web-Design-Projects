<!doctype html>
<html lang="en">

<head>
	<title>Feedback</title>
	<style>
		label {
			float: left;
			width: 150px;
		}

		#container {
			width: 700px;
			margin: auto;
			background-color: beige;
		}

		main {
			padding: 50px;
		}

		#myTable {
			border: 2px solid green;
			border-collapse: collapse;
			margin: 30px 30px 20px 40px;
		}

		#myTable td,
		th {
			border: 1px solid green;
			padding: 5px;
		}

		#myTable th {
			color: #fff;
			background-color: #a7c942;
		}
	</style>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
	<div id="container">

		<main>
			<h2>Feedback</h2>
			<h3>Love something? Hate something? Let us know!</h3>
			Note : Fields marked with an asterisk(*) are mandatory
			<br><br>
			<form id="myForm" method="post">
				<label>Title*:</label>
				<input type="radio" name="title" id="miss" value="Miss" required="required" />Miss
				<input type="radio" name="title" id="mr" value="Mr." required="required" />Mr.
				<input type="radio" name="title" id="mrs" value="Mrs." required="required" />Mrs.
				<br><br>
				<label for="firstName">First Name*:</label>
				<input type="text" name="firstName" id="firstName" placeholder="First Name" required="required" />
				<br><br>

				<div id="error_firstName" style="display: none; color: red">
					Please ensure your First Name doesn't contain any numbers/special characters
					<br><br>
				</div>

				<label for="lastName">Last Name*:</label>
				<input type="text" name="lastName" id="lastName" placeholder="Last Name" required="required" />
				<br><br>

				<div id="error_lastName" style="display: none; color: red">
					Please ensure your Last Name doesn't contain any numbers/special characters
					<br><br>
				</div>

				<label for="emailId">Email Id*:</label>
				<input type="text" name="emailId" id="emailId" placeholder="user@northeastern.edu" required="required" />
				<br><br>

				<div id="error_emailId" style="display: none; color: red">
					Invalid Email Address, Please Enter Valid Email Address in user@northeastern.edu format
					<br><br>
				</div>

				<label for="phoneNumber">Phone Number*:</label>
				<input type="text" name="phoneNumber" id="phoneNumber" placeholder="xxx-xxx-xxxx" required="required" />
				<br><br>

				<div id="error_phoneNumber" style="display: none; color: red">
					Invalid Phone Number, Please Enter Valid Phone Number in xxx-xxx-xxxx format
					<br><br>
				</div>

				<label for="streetAddress1">Street Address 1*:</label>
				<input type="text" name="streetAddress1" id="streetAddress1" placeholder="Address"
					required="required" />
				<br><br>

				<div id="error_streetAddress1" style="display: none; color: red">
					Street Address required, Please Enter Valid Street Address
					<br><br>
				</div>

				<label for="streetAddress2">Street Address 2:</label>
				<input type="text" name="streetAddress2" id="streetAddress2" placeholder="Address" />
				<br><br>

				<label for="city">City*:</label>
				<input type="text" name="city" id="city" placeholder="City" required="required" />
				<br><br>

				<div id="error_city" style="display: none; color: red">
					City required, Please Enter Valid City
					<br><br>
				</div>

				<label for="state">State*:</label>
				<input type="text" name="state" id="state" placeholder="State" required="required" />
				<br><br>

				<div id="error_state" style="display: none; color: red">
					State required, Please Enter Valid State
					<br><br>
				</div>

				<label for="zipcode">ZipCode*:</label>
				<input type="text" name="zipcode" id="zipcode" placeholder="xxxxxx" required="required" />
				<br><br>

				<div id="error_zipcode" style="display: none; color: red">
					Zip Code required, Please Enter Valid Zip Code
					<br><br>
				</div>

				<label>How did you hear*:</label>
				<input type="checkbox" name="source" value="Facebook" required="required" /> Facebook
				<input type="checkbox" name="source" value="Google" required="required" /> Google
				<input type="checkbox" name="source" value="Yelp" required="required" /> Yelp
				<br><br>

				<label for="drinksDropDown">Drinks*:</label>
				<select name="drinksDropDown" id="drinksDropDown" onchange="drinksCheckBox(this)">
					<option value="">*Select an option*</option>
					<option value="Hot Black Tea">Hot Black Tea</option>
					<option value="Cold Coffee">Cold Coffee</option>
					<option value="Lemon Iced Tea">Lemon Iced Tea</option>
					<option value="Espresso">Espresso</option>
					<option value="Latte">Latte</option>
				</select>
				<br /><br />
				<input type="checkbox" name="check" id="check" style="display: none"
					onclick="customisationsField(this)" />
				<div id="drinksText" style="display: inline"></div>
				<br /><br />

				<label for="textField" id="labelCustomisations" style="display: none">Any Additional
					Customisations*: </label>
				<input type="text" name="textField" placeholder="Additional Customisations" id="textField"
					style="display: none" />
				<br /><br />

				<div id="error_textField" style="display: none; color: red">
					Please fill in any customisation details
					<br />
					<br />
				</div>

				<label for="comments">Comments*:</label>
				<textarea name="text" id="comments" placeholder="Your Comments" rows="5" cols="25"
					required="required"></textarea>
				<br><br>

				<div id="error_comments" style="display: none;color: red">
					Please Enter a Valid Comment
					<br><br>
				</div>

				<input type="Submit">
				<input type="Reset">
				<br><br>
			</form>
		</main>
	</div>
	<br><br>
	<table id="myTable">
		<tr>
			<th>Title</th>
			<th>First Name</th>
			<th>Last Name</th>
			<th>Email Id</th>
			<th>Phone</th>
			<th>Street Address 1</th>
			<th>Street Address 2</th>
			<th>City</th>
			<th>State</th>
			<th>Zip Code</th>
			<th>Referral</th>
			<th>Drink</th>
			<th>Size</th>
			<th>Additional Customisations</th>
			<th>Comments</th>
		</tr>
	</table>

	<script>
		var form = document.getElementById("myForm");
		form.addEventListener("submit", submitted)

		var validFirstName = false;
		var validLastName = false;
		var validEmail = false;
		var validPhone = false;
		var validStreetAddress1 = false;
		var validCity = false;
		var validState = false;
		var validZipcode = false;
		var validComments = false;
		var validCustomisations = false;

		var tableData;

		// regex checks variables
		var regExName = /^[a-zA-Z]+$/;
		var regExEmail = /([\w\.]+)@northeastern.edu/;
		var regExPhone = /\d{3}-?\d{3}-\d{4}$/;
		var regExZip = /\d{5,6}/;

		var firstName = document.getElementById("firstName");
		firstName.addEventListener("input", validate);

		var lastName = document.getElementById("lastName");
		lastName.addEventListener("input", validate);

		var emailId = document.getElementById("emailId");
		emailId.addEventListener("input", validate);

		var phoneNumber = document.getElementById("phoneNumber");
		phoneNumber.addEventListener("input", validate);

		var streetAddress1 = document.getElementById("streetAddress1");
		streetAddress1.addEventListener("input", validate);

		var city = document.getElementById("city");
		city.addEventListener("input", validate);

		var state = document.getElementById("state");
		state.addEventListener("input", validate);

		var zipcode = document.getElementById("zipcode");
		zipcode.addEventListener("input", validate);

		var comments = document.getElementById("comments");
		comments.addEventListener("input", validate);

		var textField = document.getElementById("textField");
		textField.addEventListener("input", validate);

		// Function for validation
		function validate(e) {
			var value = e.target.value;
			var type = this.id;
			var em = "error_" + type

			switch (type) {

				case "firstName":
					if (!value.trim().match(regExName)) {
						document.getElementById(em).style.display = "block";
						this.style.border = "2px solid red";
						validFirstName = false;
					}
					else {
						document.getElementById(em).style.display = "none";
						this.style.border = "";
						validFirstName = true;
					}
					break;

				case "lastName":
					if (!value.trim().match(regExName)) {
						document.getElementById(em).style.display = "block";
						this.style.border = "2px solid red";
						validLastName = false;
					}
					else {
						document.getElementById(em).style.display = "none";
						this.style.border = "";
						validLastName = true;
					}
					break;

				case "emailId":
					if (!value.trim().match(regExEmail)) {
						document.getElementById(em).style.display = "block";
						this.style.border = "2px solid red";
						validEmail = false;
					}
					else {
						document.getElementById(em).style.display = "none";
						this.style.border = "";
						validEmail = true;
					}
					break;

				case "phoneNumber":
					if (!value.trim().match(regExPhone)) {
						document.getElementById(em).style.display = "block";
						this.style.border = "2px solid red";
						validPhone = false;
					}
					else {
						document.getElementById(em).style.display = "none";
						this.style.border = "";
						validPhone = true;
					}
					break;

				case "streetAddress1":
					if (value.trim() == "") {
						document.getElementById(em).style.display = "block";
						this.style.border = "2px solid red";
						validStreetAddress1 = false;
					}
					else {
						document.getElementById(em).style.display = "none";
						this.style.border = "";
						validStreetAddress1 = true;
					}
					break;

				case "city":
					if (!value.trim().match(regExName)) {
						document.getElementById(em).style.display = "block";
						this.style.border = "2px solid red";
						validCity = false;
					}
					else {
						document.getElementById(em).style.display = "none";
						this.style.border = "";
						validCity = true;
					}
					break;

				case "state":
					if (!value.trim().match(regExName)) {
						document.getElementById(em).style.display = "block";
						this.style.border = "2px solid red";
						validState = false;
					}
					else {
						document.getElementById(em).style.display = "none";
						this.style.border = "";
						validState = true;
					}
					break;

				case "zipcode":
					if (!value.trim().match(regExZip)) {
						document.getElementById(em).style.display = "block";
						this.style.border = "2px solid red";
						validZipcode = false;
					}
					else {
						document.getElementById(em).style.display = "none";
						this.style.border = "";
						validZipcode = true;
					}
					break;

				case "comments":
					if (value.trim() == "") {
						document.getElementById(em).style.display = "block";
						this.style.border = "2px solid red";
						validComments = false;
					}
					else {
						document.getElementById(em).style.display = "none";
						this.style.border = "";
						validComments = true;
					}
					break;

				case "textField":
					if (value.trim() == "") {
						document.getElementById(em).style.display = "block";
						this.style.border = "2px solid red";
						validCustomisations = false;
					}
					else {
						document.getElementById(em).style.display = "none";
						this.style.border = "";
						validCustomisations = true;
					}
					break;

			}
		}


		function submitted(e) {
			e.preventDefault();
			var drinksDropDownValue = document.getElementById("drinksDropDown").value;
			var checkbox = document.getElementById("check").checked;
			if (validFirstName && validLastName && validEmail && validPhone && validStreetAddress1 && validCity && validState && validZipcode && validComments && (checkbox ? validCustomisations : true)) {
				if (drinksDropDownValue != "") {
					alert("Data has been saved and loaded to the table succesfully!")
					tableData = e.target;
					populateTable();
					resetForm();
				}
				else {
					alert("Please select a drink");
				}
			}
			else {
				alert("Please enter proper data");
			}
		}

		function resetForm() {
			document.getElementById("myForm").reset();
			document.getElementById("check").style.display = "none";
			document.getElementById("drinksText").innerHTML = "";
			document.getElementById("labelCustomisations").style.display = "none";
			document.getElementById("textField").style.display = "none";
		}

		function populateTable() {
			var table = document.getElementById("myTable");
			var tr = document.createElement("tr");
			var td = document.createElement("td");
			var textNode;
			for (let i = 0; i < tableData.length - 2; i++) {
				td = document.createElement("td");
				if (i == 0 || i == 1 || i == 2 || i == 12 || i == 13 || i == 14) {
					if (tableData[i].checked) {
						textNode = document.createTextNode(tableData[i].value);
						td.appendChild(textNode);
						tr.appendChild(td);
					}
				}
				else if (i == 16) {
					if (!tableData[i].checked) {
						textNode = document.createTextNode("NA");
						td.appendChild(textNode);
						tr.appendChild(td);
					}
					else {
						textNode = document.createTextNode(tableData[i].value);
						td.appendChild(textNode);
						tr.appendChild(td);
					}
				}
				else if (i == 8 || i == 17) {
					if (tableData[i].value == "") {
						textNode = document.createTextNode("NA");
						td.appendChild(textNode);
						tr.appendChild(td);
					}
					else {
						textNode = document.createTextNode(tableData[i].value);
						td.appendChild(textNode);
						tr.appendChild(td);
					}
				}
				else {
					textNode = document.createTextNode(tableData[i].value);
					td.appendChild(textNode);
					tr.appendChild(td);
				}
			}
			table.appendChild(tr);
		}

		$(function () {
			var requiredCheckboxes = $(":checkbox[required]");

			requiredCheckboxes.change(function () {
				if (requiredCheckboxes.is(":checked")) {
					requiredCheckboxes.removeAttr("required");
				} else {
					requiredCheckboxes.attr("required", "required");
				}
			});
		});

		function drinksCheckBox(selectObject) {
			if (selectObject.value == "") {
				document.getElementById("check").style.display = "none";
				document.getElementById("drinksText").innerHTML = "";
			} else {
				document.getElementById("check").style.display = "inline";
				var selectedText = selectObject.value + " - Large ($1 extra)";
				document.getElementById("check").value = selectedText;
				document.getElementById("drinksText").innerHTML = selectedText;
			}
		}

		function customisationsField(input) {
			if (input.checked) {
				document.getElementById("labelCustomisations").style.display = "block";
				document.getElementById("textField").style.display = "block";
				document.getElementById("textField").required = true;
			} else {
				document.getElementById("labelCustomisations").style.display = "none";
				document.getElementById("textField").style.display = "none";
				document.getElementById("error_textField").style.display = "none";
				document.getElementById("textField").required = false;
				document.getElementById("textField").style.border = "";
				document.getElementById("textField").value = "";
			}
		}

	</script>

</body>

</html>